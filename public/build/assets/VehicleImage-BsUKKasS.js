import{l as C,g as p,o as m,s as U,n as k,u as o,p as L,j as f,k as O,c as E,w as l,a,h as I,b as s,t as n,d as r,e as G,W as q}from"./app-Ba_b_3m7.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dwz7x49o.js";import{_ as A}from"./Heading.vue_vue_type_script_setup_true_lang-Fnrqrydj.js";import{_ as S}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CDA0Nxch.js";import{_ as b}from"./Icon.vue_vue_type_script_setup_true_lang-DxsdKrOH.js";import{_ as N,a as T}from"./CardContent.vue_vue_type_script_setup_true_lang-D_ezlwcN.js";import{c as B}from"./createLucideIcon-C8qViPkE.js";import{_ as w,a as W}from"./Label.vue_vue_type_script_setup_true_lang-Dn-_W2o9.js";/* empty css            */import"./useForwardExpose-BiQwX1hr.js";import"./RovingFocusGroup-DDiL9omc.js";import"./x-Crtn1-Kg.js";import"./save-CoaLqZK6.js";import"./check-BTQjTN9S.js";import"./chevron-down-DC553Hyt.js";import"./eye-BPt7r2d8.js";import"./loader-circle-CJGtrV6W.js";import"./sun-Cv9OsLDu.js";import"./trash-2-C2wzNrBQ.js";const F=C({__name:"CardDescription",props:{class:{}},setup(h){const v=h;return(t,u)=>(m(),p("p",{"data-slot":"card-description",class:k(o(B)("text-muted-foreground text-sm",v.class))},[U(t.$slots,"default")],2))}}),j=C({__name:"CardHeader",props:{class:{}},setup(h){const v=h;return(t,u)=>(m(),p("div",{"data-slot":"card-header",class:k(o(B)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",v.class))},[U(t.$slots,"default")],2))}}),P=C({__name:"CardTitle",props:{class:{}},setup(h){const v=h;return(t,u)=>(m(),p("h3",{"data-slot":"card-title",class:k(o(B)("leading-none font-semibold",v.class))},[U(t.$slots,"default")],2))}}),H={class:"p-6"},J={class:"flex items-center justify-between mb-6"},K={class:"text-gray-600 mt-2"},X={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Q={class:"text-center"},Y={key:0,class:"mb-4"},Z=["src","alt"],ee={class:"text-sm text-gray-500 mt-2"},ae={key:1,class:"mb-4"},te={class:"w-full max-w-md mx-auto h-64 bg-gray-100 rounded-lg flex items-center justify-center"},se={class:"text-center"},le={class:"flex gap-2 justify-center"},oe={key:0,class:"text-center"},re=["src"],ie={class:"text-sm text-gray-500 mt-2"},ne={key:0,class:"mt-6"},ue={class:"flex items-center"},me={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},de={class:"text-lg font-semibold"},ce={class:"text-lg font-semibold"},_e={class:"text-lg font-semibold"},ge={class:"text-lg font-semibold"},Ee=C({__name:"VehicleImage",setup(h){const v=L(),t=f(v.props.vehicle),u=f(null),x=f(""),y=f(!1),$=f(!1),i=f(""),d=f("success"),R=c=>{var g;const _=(g=c.target.files)==null?void 0:g[0];_&&(u.value=_,x.value=URL.createObjectURL(_))},V=async()=>{var c;if(u.value){y.value=!0,i.value="";try{const e=new FormData;e.append("image",u.value);const g=await(await fetch(`/vehicles/${t.value.id}/image`,{method:"POST",headers:{"X-CSRF-TOKEN":((c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"))||""},body:e})).json();g.success?(i.value=g.message,d.value="success",t.value.current_image=g.image_url,t.value.has_image=!0,t.value.image_path=g.image_path,u.value=null,x.value="",setTimeout(()=>{i.value=""},3e3)):(i.value=g.message,d.value="error")}catch{i.value="Failed to upload image. Please try again.",d.value="error"}finally{y.value=!1}}},M=async()=>{var c;if(confirm("Are you sure you want to remove this image?")){$.value=!0,i.value="";try{const _=await(await fetch(`/vehicles/${t.value.id}/image`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"))||"","Content-Type":"application/json"}})).json();_.success?(i.value=_.message,d.value="success",t.value.current_image="",t.value.has_image=!1,t.value.image_path="",setTimeout(()=>{i.value=""},3e3)):(i.value=_.message,d.value="error")}catch{i.value="Failed to remove image. Please try again.",d.value="error"}finally{$.value=!1}}},D=()=>{q.visit("/vehicles")};return O(()=>()=>{x.value&&URL.revokeObjectURL(x.value)}),(c,e)=>(m(),E(z,null,{default:l(()=>[a("div",H,[a("div",J,[a("div",null,[s(A,{title:"Vehicle Image Management"}),a("p",K," Managing image for "+n(t.value.make)+" "+n(t.value.model)+" ("+n(t.value.plate_number)+") ",1)]),s(S,{onClick:D,variant:"outline",size:"sm"},{default:l(()=>[s(b,{name:"arrow-left",class:"w-4 h-4 mr-2"}),e[0]||(e[0]=r(" Back to Vehicles "))]),_:1,__:[0]})]),a("div",X,[s(o(N),null,{default:l(()=>[s(o(j),null,{default:l(()=>[s(o(P),null,{default:l(()=>e[1]||(e[1]=[r("Current Image")])),_:1,__:[1]}),s(o(F),null,{default:l(()=>e[2]||(e[2]=[r(" Current image for this vehicle ")])),_:1,__:[2]})]),_:1}),s(o(T),null,{default:l(()=>[a("div",Q,[t.value.has_image?(m(),p("div",Y,[a("img",{src:t.value.current_image,alt:`${t.value.make} ${t.value.model}`,class:"w-full max-w-md mx-auto rounded-lg shadow-lg"},null,8,Z),a("p",ee,n(t.value.image_path),1)])):(m(),p("div",ae,[a("div",te,[a("div",se,[s(b,{name:"image",class:"w-16 h-16 text-gray-400 mx-auto mb-2"}),e[3]||(e[3]=a("p",{class:"text-gray-500"},"No image uploaded",-1))])])])),a("div",le,[t.value.has_image?(m(),E(S,{key:0,onClick:M,variant:"destructive",size:"sm",disabled:$.value},{default:l(()=>[s(b,{name:"trash-2",class:"w-4 h-4 mr-2"}),r(" "+n($.value?"Removing...":"Remove Image"),1)]),_:1},8,["disabled"])):I("",!0)])])]),_:1})]),_:1}),s(o(N),null,{default:l(()=>[s(o(j),null,{default:l(()=>[s(o(P),null,{default:l(()=>e[4]||(e[4]=[r("Upload New Image")])),_:1,__:[4]}),s(o(F),null,{default:l(()=>e[5]||(e[5]=[r(" Upload a new image for this vehicle ")])),_:1,__:[5]})]),_:1}),s(o(T),null,{default:l(()=>[a("form",{onSubmit:G(V,["prevent"]),class:"space-y-4"},[a("div",null,[s(o(w),{for:"image"},{default:l(()=>e[6]||(e[6]=[r("Select Image")])),_:1,__:[6]}),s(o(W),{id:"image",type:"file",accept:"image/*",onChange:R,disabled:y.value,required:""},null,8,["disabled"]),e[7]||(e[7]=a("p",{class:"text-sm text-gray-500 mt-1"}," Supported formats: JPEG, PNG, JPG, GIF, WEBP (max 2MB) ",-1))]),u.value?(m(),p("div",oe,[a("img",{src:x.value,alt:"Preview",class:"w-full max-w-md mx-auto rounded-lg shadow-md"},null,8,re),a("p",ie,n(u.value.name),1)])):I("",!0),s(S,{type:"submit",disabled:!u.value||y.value,class:"w-full"},{default:l(()=>[s(b,{name:"upload",class:"w-4 h-4 mr-2"}),r(" "+n(y.value?"Uploading...":"Upload Image"),1)]),_:1},8,["disabled"])],32)]),_:1})]),_:1})]),i.value?(m(),p("div",ne,[a("div",{class:k(["p-4 rounded-lg border",d.value==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"])},[a("div",ue,[s(b,{name:d.value==="success"?"check-circle":"alert-circle",class:"w-5 h-5 mr-2"},null,8,["name"]),r(" "+n(i.value),1)])],2)])):I("",!0),s(o(N),{class:"mt-6"},{default:l(()=>[s(o(j),null,{default:l(()=>[s(o(P),null,{default:l(()=>e[8]||(e[8]=[r("Vehicle Information")])),_:1,__:[8]})]),_:1}),s(o(T),null,{default:l(()=>[a("div",me,[a("div",null,[s(o(w),{class:"text-sm font-medium text-gray-500"},{default:l(()=>e[9]||(e[9]=[r("Make")])),_:1,__:[9]}),a("p",de,n(t.value.make),1)]),a("div",null,[s(o(w),{class:"text-sm font-medium text-gray-500"},{default:l(()=>e[10]||(e[10]=[r("Model")])),_:1,__:[10]}),a("p",ce,n(t.value.model),1)]),a("div",null,[s(o(w),{class:"text-sm font-medium text-gray-500"},{default:l(()=>e[11]||(e[11]=[r("Plate Number")])),_:1,__:[11]}),a("p",_e,n(t.value.plate_number),1)]),a("div",null,[s(o(w),{class:"text-sm font-medium text-gray-500"},{default:l(()=>e[12]||(e[12]=[r("Image Status")])),_:1,__:[12]}),a("p",ge,[a("span",{class:k(t.value.has_image?"text-green-600":"text-red-600")},n(t.value.has_image?"Has Image":"No Image"),3)])])])]),_:1})]),_:1})])]),_:1}))}});export{Ee as default};
