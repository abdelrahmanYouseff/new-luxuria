import{l as B,p as O,j as p,m as C,c as S,o as c,w as n,a as e,g as m,h,b as a,d as l,n as f,t as i,F as W,r as L,u,W as M}from"./app-BmtqsL1k.js";import{a as U,b as q,c as K,d as v,_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-Ble2OSDe.js";import{_ as Y}from"./Heading.vue_vue_type_script_setup_true_lang-Cvt8WFMJ.js";import{_ as x}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-jcm6BKT1.js";import{_ as r}from"./Icon.vue_vue_type_script_setup_true_lang-Uebf9f5Y.js";/* empty css            */import"./createLucideIcon-6njab1rV.js";import"./useForwardExpose-Crs7NE2t.js";import"./RovingFocusGroup-BmkD-kIC.js";import"./x-CAInKn2B.js";import"./save-DQuJ6KMF.js";import"./check-kxm3lot7.js";import"./chevron-down-DCl2u-jb.js";import"./eye-BkstkJV9.js";import"./loader-circle-BYLUlrRj.js";import"./sun-7iVVO116.js";import"./trash-2-DK3anBPA.js";const G={class:"p-6"},J={class:"flex items-center justify-between mb-6"},Q={class:"flex items-center space-x-3"},Z={key:0,class:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},ee={class:"flex items-center"},te={class:"text-sm text-yellow-800"},se={key:1,class:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg"},ae={class:"flex items-center"},oe={class:"text-sm text-green-800"},ie={class:"bg-white rounded-lg shadow-sm border"},ne={class:"overflow-x-auto"},le={class:"w-full"},re={class:"bg-white divide-y divide-gray-200"},de={class:"px-6 py-4 whitespace-nowrap"},ce={class:"flex items-center"},me={class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-3 overflow-hidden"},ue=["src","alt"],pe={class:"text-sm font-medium text-gray-900 flex items-center"},fe={key:0,class:"ml-1 text-xs text-red-500"},xe={class:"text-sm text-gray-500"},ge={class:"px-6 py-4 whitespace-nowrap"},_e={class:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full"},ye={class:"px-6 py-4 whitespace-nowrap"},we={class:"space-y-1"},be={key:0,class:"text-xs text-red-600 font-medium bg-red-50 px-2 py-1 rounded border border-red-200"},he={class:"px-6 py-4 whitespace-nowrap"},ve={class:"px-6 py-4 whitespace-nowrap"},ke={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},$e={class:"font-medium"},Ve={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Se={class:"px-6 py-4 border-t border-gray-200"},Ae={class:"flex items-center justify-between"},Re={class:"text-sm text-gray-700"},He={class:"font-medium"},Pe={class:"font-medium"},Te={key:0,class:"text-gray-500 ml-2"},je={class:"flex items-center space-x-2"},Qe=B({__name:"Vehicles",setup(ze){const y=O(),w=p(y.props.vehicles||[]),A=p(y.props.apiStatus||"loading"),$=p(y.props.error||null),R=p(y.props.totalCount||0),H=p(y.props.dataSource||"database"),V=C(()=>g.value?w.value:w.value.filter(o=>o.is_visible!==!1)),P=C(()=>w.value.filter(o=>o.is_visible!==!1).length),k=C(()=>w.value.filter(o=>o.is_visible===!1).length),b=p(!1),g=p(!0),T=()=>{window.location.reload()},j=o=>{alert(`Edit vehicle ${o}`)},z=o=>{alert(`View vehicle ${o}`)},E=o=>{confirm("Are you sure you want to delete this vehicle?")&&alert(`Delete vehicle ${o}`)},F=o=>{window.open(`/vehicles/${o}/image-blade`,"_blank")},N=async()=>{b.value=!0;try{await M.post("/vehicles/sync"),window.location.reload()}catch(o){console.error("Sync failed:",o),alert("Failed to sync vehicles from API")}finally{b.value=!1}},D=()=>{window.location.href="/vehicles-api"},I=async o=>{var s;try{const t=(s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content");if(!t){console.error("CSRF token not found"),alert("CSRF token not found. Please refresh the page and try again.");return}console.log("Toggling visibility for vehicle:",o.id),console.log("CSRF Token:",t);const d=await fetch(`/vehicles/${o.id}/toggle-visibility`,{method:"PATCH",headers:{"X-CSRF-TOKEN":t,"Content-Type":"application/json",Accept:"application/json"}});if(console.log("Response status:",d.status),console.log("Response headers:",d.headers),d.ok){const _=await d.json();console.log("Response data:",_),o.is_visible=_.is_visible,alert(_.message),window.location.reload()}else{const _=await d.text();throw console.error("Response error:",_),new Error(`HTTP ${d.status}: ${_}`)}}catch(t){console.error("Error toggling visibility:",t);const d=t instanceof Error?t.message:"Unknown error";alert(`Failed to toggle vehicle visibility: ${d}`)}};return(o,s)=>(c(),S(X,null,{default:n(()=>[e("div",G,[e("div",J,[a(Y,{title:"Vehicles"}),e("div",Q,[a(x,{onClick:N,variant:"default",size:"sm",disabled:b.value},{default:n(()=>[a(r,{name:"refresh-cw",class:f(`w-4 h-4 mr-2 ${b.value?"animate-spin":""}`)},null,8,["class"]),l(" "+i(b.value?"Syncing...":"Sync from API"),1)]),_:1},8,["disabled"]),a(x,{onClick:D,variant:"outline",size:"sm"},{default:n(()=>[a(r,{name:"database",class:"w-4 h-4 mr-2"}),s[1]||(s[1]=l(" Vehicles API "))]),_:1,__:[1]}),a(x,{onClick:T,variant:"outline",size:"sm"},{default:n(()=>[a(r,{name:"refresh-cw",class:"w-4 h-4 mr-2"}),s[2]||(s[2]=l(" Refresh "))]),_:1,__:[2]}),a(x,{onClick:s[0]||(s[0]=t=>g.value=!g.value),variant:g.value?"default":"outline",size:"sm"},{default:n(()=>[a(r,{name:g.value?"eye-off":"eye",class:"w-4 h-4 mr-2"},null,8,["name"]),l(" "+i(g.value?"Hide Hidden":"Show Hidden")+" ("+i(k.value)+") ",1)]),_:1},8,["variant"])])]),$.value?(c(),m("div",Z,[e("div",ee,[a(r,{name:"alert-triangle",class:"w-5 h-5 text-yellow-600 mr-2"}),e("span",te,i($.value),1)])])):h("",!0),A.value==="success"?(c(),m("div",se,[e("div",ae,[a(r,{name:"check-circle",class:"w-5 h-5 text-green-600 mr-2"}),e("span",oe," Successfully loaded "+i(R.value)+" vehicles from "+i(H.value==="database"?"database":"API"),1)])])):h("",!0),e("div",ie,[s[14]||(s[14]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("div",{class:"flex items-center justify-between"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Vehicles List")])],-1)),e("div",ne,[e("table",le,[s[8]||(s[8]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Vehicle"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Plate Number"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Category"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ownership"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Year"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Daily Rate"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",re,[(c(!0),m(W,null,L(V.value,t=>(c(),m("tr",{key:t.id,class:f(["hover:bg-gray-50",t.is_visible?"":"bg-red-25 border-l-4 border-red-300"])},[e("td",de,[e("div",ce,[e("div",me,[t.image?(c(),m("img",{key:0,src:t.image_url,alt:t.name,class:"w-full h-full object-cover"},null,8,ue)):(c(),S(r,{key:1,name:"car",class:"w-6 h-6 text-blue-600"}))]),e("div",null,[e("div",pe,[l(i(t.name)+" ",1),a(r,{name:t.is_visible?"eye":"eye-off",class:f(`w-4 h-4 ml-2 ${t.is_visible?"text-green-600":"text-red-600"}`),title:t.is_visible?"Visible on website":"Hidden from website"},null,8,["name","class","title"]),t.is_visible?h("",!0):(c(),m("span",fe,"(Hidden)"))]),e("div",xe,i(t.model),1)])])]),e("td",ge,[e("span",_e,i(t.plateNumber),1)]),e("td",ye,[e("div",we,[e("span",{class:f(["px-2 py-1 text-xs font-medium rounded-full",t.status==="Available"?"bg-green-100 text-green-800":t.status==="Rented"?"bg-red-100 text-red-800":t.status==="Maintenance"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},i(t.status),3),t.is_visible?h("",!0):(c(),m("div",be," Hidden from website "))])]),e("td",he,[e("span",{class:f(["px-2 py-1 text-xs font-medium rounded-full",t.category==="Economy"?"bg-blue-100 text-blue-800":t.category==="Luxury"?"bg-purple-100 text-purple-800":t.category==="SUV"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},i(t.category),3)]),e("td",ve,[e("span",{class:f(["px-2 py-1 text-xs font-medium rounded-full",t.ownership==="Owned"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"])},i(t.ownership),3)]),e("td",ke,i(t.year||"N/A"),1),e("td",Ce,[e("span",$e,"AED "+i(t.dailyRate),1)]),e("td",Ve,[a(u(U),null,{default:n(()=>[a(u(q),{"as-child":""},{default:n(()=>[a(x,{size:"sm",variant:"outline",class:"h-8 w-8 p-0"},{default:n(()=>[a(r,{name:"more-horizontal",class:"w-4 h-4"}),s[3]||(s[3]=e("span",{class:"sr-only"},"Open menu",-1))]),_:1,__:[3]})]),_:1}),a(u(K),{align:"end"},{default:n(()=>[a(u(v),{onClick:d=>z(t.id)},{default:n(()=>[a(r,{name:"eye",class:"w-4 h-4 mr-2"}),s[4]||(s[4]=l(" View Details "))]),_:2,__:[4]},1032,["onClick"]),a(u(v),{onClick:d=>j(t.id)},{default:n(()=>[a(r,{name:"edit",class:"w-4 h-4 mr-2"}),s[5]||(s[5]=l(" Edit Vehicle "))]),_:2,__:[5]},1032,["onClick"]),a(u(v),{onClick:d=>F(t.id)},{default:n(()=>[a(r,{name:"image",class:"w-4 h-4 mr-2"}),s[6]||(s[6]=l(" Manage Image "))]),_:2,__:[6]},1032,["onClick"]),a(u(v),{onClick:d=>I(t),class:f(t.is_visible?"text-orange-600":"text-green-600")},{default:n(()=>[a(r,{name:t.is_visible?"eye-off":"eye",class:"w-4 h-4 mr-2"},null,8,["name"]),l(" "+i(t.is_visible?"Hide from Website":"Show on Website"),1)]),_:2},1032,["onClick","class"]),a(u(v),{onClick:d=>E(t.id),class:"text-red-600"},{default:n(()=>[a(r,{name:"trash-2",class:"w-4 h-4 mr-2"}),s[7]||(s[7]=l(" Delete Vehicle "))]),_:2,__:[7]},1032,["onClick"])]),_:2},1024)]),_:2},1024)])],2))),128))])])]),e("div",Se,[e("div",Ae,[e("div",Re,[s[9]||(s[9]=l(" Showing ")),e("span",He,i(V.value.length),1),s[10]||(s[10]=l(" of ")),e("span",Pe,i(w.value.length),1),s[11]||(s[11]=l(" vehicles ")),k.value>0?(c(),m("span",Te,"("+i(P.value)+" visible, "+i(k.value)+" hidden)",1)):h("",!0)]),e("div",je,[a(x,{size:"sm",variant:"outline",disabled:""},{default:n(()=>s[12]||(s[12]=[l("Previous")])),_:1,__:[12]}),a(x,{size:"sm",variant:"outline",disabled:""},{default:n(()=>s[13]||(s[13]=[l("Next")])),_:1,__:[13]})])])])])])]),_:1}))}});export{Qe as default};
