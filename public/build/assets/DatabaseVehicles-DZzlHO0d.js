import{l as I,p as O,j as y,m as h,k as W,c as j,o as m,w as o,a as e,g as v,h as A,b as s,d as u,n as f,t as d,f as D,i as R,F as Y,r as q,u as _,W as b}from"./app-CRqtDdha.js";import{a as G,b as H,c as J,d as V,_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-DjbqoCZ3.js";import{_ as Q}from"./Heading.vue_vue_type_script_setup_true_lang-CdNwDoJA.js";import{_ as x}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B4pJarTW.js";import{_ as n}from"./Icon.vue_vue_type_script_setup_true_lang-DUHEMwjt.js";import{_ as $,a as X}from"./Label.vue_vue_type_script_setup_true_lang-DSOaqdHl.js";/* empty css            */import"./createLucideIcon-DZI9vfrF.js";import"./useForwardExpose-DfaG08-o.js";import"./RovingFocusGroup-C1UeiKgX.js";import"./x-Dj4c86Uo.js";import"./save-BZpp7Ncd.js";import"./check-S5F5-vGg.js";import"./chevron-down-Wr0NV14N.js";import"./eye-D1vqakII.js";import"./loader-circle-CPsmHvsy.js";import"./sun-CC4aO06j.js";import"./trash-2-DKK_BkHt.js";const Z={class:"p-6"},ee={class:"flex items-center justify-between mb-6"},te={class:"flex items-center space-x-3"},se={class:"flex items-center"},ae={class:"bg-white rounded-lg shadow-sm border mb-6"},le={class:"p-6"},oe={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ne={class:"flex items-end"},re={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},ie={class:"bg-white rounded-lg shadow-sm border p-6"},de={class:"flex items-center"},ce={class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4"},ue={class:"text-2xl font-bold text-gray-900"},me={class:"bg-white rounded-lg shadow-sm border p-6"},pe={class:"flex items-center"},fe={class:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4"},_e={class:"text-2xl font-bold text-gray-900"},xe={class:"bg-white rounded-lg shadow-sm border p-6"},ge={class:"flex items-center"},ye={class:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mr-4"},ve={class:"text-2xl font-bold text-gray-900"},be={class:"bg-white rounded-lg shadow-sm border p-6"},we={class:"flex items-center"},he={class:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center mr-4"},ke={class:"text-2xl font-bold text-gray-900"},Ce={class:"bg-white rounded-lg shadow-sm border"},Ve={class:"px-6 py-4 border-b border-gray-200"},$e={class:"flex items-center justify-between"},Se={class:"flex items-center space-x-2"},je={class:"overflow-x-auto"},Ae={class:"w-full"},De={class:"bg-white divide-y divide-gray-200"},Re={class:"px-6 py-4 whitespace-nowrap"},Le={class:"flex items-center"},Me={class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-3"},Ne=["src","alt"],Ue={class:"text-sm font-medium text-gray-900"},ze={class:"text-sm text-gray-500"},Ee={class:"px-6 py-4 whitespace-nowrap"},Fe={class:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full"},Be={class:"px-6 py-4 whitespace-nowrap"},Pe={class:"px-6 py-4 whitespace-nowrap"},Te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ie={class:"font-medium"},Oe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},We={key:0,class:"text-center py-12"},ct=I({__name:"DatabaseVehicles",setup(Ye){const k=O(),w=y(k.props.vehicles||[]),c=y(k.props.syncResult||null),L=y(k.props.totalCount||0),g=y(!1),i=y({category:"",status:"",make:""}),C=h(()=>w.value.filter(l=>{var t;return!(i.value.category&&l.category!==i.value.category||i.value.status&&l.status!==i.value.status||i.value.make&&!((t=l.make)!=null&&t.toLowerCase().includes(i.value.make.toLowerCase())))})),M=h(()=>w.value.filter(l=>l.status==="available").length),N=h(()=>w.value.filter(l=>l.status==="rented").length),U=h(()=>w.value.filter(l=>l.status==="maintenance").length),S=async()=>{g.value=!0;try{await b.post("/database/vehicles/sync")}catch(l){console.error("Sync failed:",l)}finally{g.value=!1}},z=()=>{b.get("/database/vehicles/create")},E=l=>{b.get(`/database/vehicles/${l.id}`)},F=l=>{b.get(`/database/vehicles/${l.id}/edit`)},B=async l=>{confirm(`Are you sure you want to delete ${l.display_name}?`)&&await b.delete(`/database/vehicles/${l.id}`)},P=()=>{i.value={category:"",status:"",make:""}},T=()=>{const l=[["ID","Make","Model","Year","Color","Category","Status","Plate Number","Daily Rate","Transmission","Seats","Doors"],...C.value.map(r=>[r.id,r.make||"",r.model||"",r.year||"",r.color||"",r.category,r.status,r.plate_number||"",r.daily_rate,r.transmission,r.seats,r.doors])].map(r=>r.join(",")).join(`
`),t=new Blob([l],{type:"text/csv"}),a=URL.createObjectURL(t),p=document.createElement("a");p.href=a,p.download="vehicles.csv",p.click(),URL.revokeObjectURL(a)};return W(()=>{c.value&&setTimeout(()=>{c.value=null},5e3)}),(l,t)=>(m(),j(K,null,{default:o(()=>[e("div",Z,[e("div",ee,[s(Q,{title:"Database Vehicles"}),e("div",te,[s(x,{onClick:S,variant:"outline",size:"sm",disabled:g.value},{default:o(()=>[s(n,{name:"refresh-cw",class:f(`w-4 h-4 mr-2 ${g.value?"animate-spin":""}`)},null,8,["class"]),u(" "+d(g.value?"Syncing...":"Sync from API"),1)]),_:1},8,["disabled"]),s(x,{onClick:z,size:"sm"},{default:o(()=>[s(n,{name:"plus",class:"w-4 h-4 mr-2"}),t[3]||(t[3]=u(" Add Vehicle "))]),_:1,__:[3]})])]),c.value?(m(),v("div",{key:0,class:f(["mb-6 p-4 rounded-lg",c.value.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"])},[e("div",se,[s(n,{name:c.value.success?"check-circle":"alert-triangle",class:f(["w-5 h-5 mr-2",c.value.success?"text-green-600":"text-red-600"])},null,8,["name","class"]),e("span",{class:f(["text-sm",c.value.success?"text-green-800":"text-red-800"])},d(c.value.success?`Sync completed! ${c.value.synced_count} new vehicles added, ${c.value.updated_count} vehicles updated.`:`Sync failed: ${c.value.error}`),3)])],2)):A("",!0),e("div",ae,[t[10]||(t[10]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Filters")],-1)),e("div",le,[e("div",oe,[e("div",null,[s($,{for:"category"},{default:o(()=>t[4]||(t[4]=[u("Category")])),_:1,__:[4]}),D(e("select",{id:"category","onUpdate:modelValue":t[0]||(t[0]=a=>i.value.category=a),class:"w-full mt-1 border border-gray-300 rounded-md px-3 py-2"},t[5]||(t[5]=[e("option",{value:""},"All Categories",-1),e("option",{value:"economy"},"Economy",-1),e("option",{value:"mid-range"},"Mid-Range",-1),e("option",{value:"luxury"},"Luxury",-1),e("option",{value:"suv"},"SUV",-1),e("option",{value:"sports"},"Sports",-1)]),512),[[R,i.value.category]])]),e("div",null,[s($,{for:"status"},{default:o(()=>t[6]||(t[6]=[u("Status")])),_:1,__:[6]}),D(e("select",{id:"status","onUpdate:modelValue":t[1]||(t[1]=a=>i.value.status=a),class:"w-full mt-1 border border-gray-300 rounded-md px-3 py-2"},t[7]||(t[7]=[e("option",{value:""},"All Status",-1),e("option",{value:"available"},"Available",-1),e("option",{value:"rented"},"Rented",-1),e("option",{value:"maintenance"},"Maintenance",-1),e("option",{value:"out_of_service"},"Out of Service",-1),e("option",{value:"reserved"},"Reserved",-1)]),512),[[R,i.value.status]])]),e("div",null,[s($,{for:"make"},{default:o(()=>t[8]||(t[8]=[u("Make")])),_:1,__:[8]}),s(X,{id:"make",modelValue:i.value.make,"onUpdate:modelValue":t[2]||(t[2]=a=>i.value.make=a),placeholder:"Search by make..."},null,8,["modelValue"])]),e("div",ne,[s(x,{onClick:P,variant:"outline",size:"sm",class:"w-full"},{default:o(()=>[s(n,{name:"x",class:"w-4 h-4 mr-2"}),t[9]||(t[9]=u(" Clear Filters "))]),_:1,__:[9]})])])])]),e("div",re,[e("div",ie,[e("div",de,[e("div",ce,[s(n,{name:"car",class:"w-6 h-6 text-blue-600"})]),e("div",null,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Vehicles",-1)),e("p",ue,d(L.value),1)])])]),e("div",me,[e("div",pe,[e("div",fe,[s(n,{name:"check-circle",class:"w-6 h-6 text-green-600"})]),e("div",null,[t[12]||(t[12]=e("p",{class:"text-sm font-medium text-gray-600"},"Available",-1)),e("p",_e,d(M.value),1)])])]),e("div",xe,[e("div",ge,[e("div",ye,[s(n,{name:"car",class:"w-6 h-6 text-red-600"})]),e("div",null,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-gray-600"},"Rented",-1)),e("p",ve,d(N.value),1)])])]),e("div",be,[e("div",we,[e("div",he,[s(n,{name:"wrench",class:"w-6 h-6 text-yellow-600"})]),e("div",null,[t[14]||(t[14]=e("p",{class:"text-sm font-medium text-gray-600"},"Maintenance",-1)),e("p",ke,d(U.value),1)])])])]),e("div",Ce,[e("div",Ve,[e("div",$e,[t[16]||(t[16]=e("h3",{class:"text-lg font-medium text-gray-900"},"Vehicles",-1)),e("div",Se,[s(x,{onClick:T,variant:"outline",size:"sm"},{default:o(()=>[s(n,{name:"download",class:"w-4 h-4 mr-2"}),t[15]||(t[15]=u(" Export CSV "))]),_:1,__:[15]})])])]),e("div",je,[e("table",Ae,[t[21]||(t[21]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Vehicle"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Plate Number"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Category"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Daily Rate"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",De,[(m(!0),v(Y,null,q(C.value,a=>(m(),v("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",Re,[e("div",Le,[e("div",Me,[a.image_url?(m(),v("img",{key:0,src:a.image_url,alt:a.display_name,class:"w-12 h-12 object-cover rounded-lg"},null,8,Ne)):(m(),j(n,{key:1,name:"car",class:"w-6 h-6 text-blue-600"}))]),e("div",null,[e("div",Ue,d(a.display_name),1),e("div",ze,d(a.year)+" â€¢ "+d(a.color),1)])])]),e("td",Ee,[e("span",Fe,d(a.plate_number||"N/A"),1)]),e("td",Be,[e("span",{class:f(["px-2 py-1 text-xs font-medium rounded-full",a.status_badge_class])},d(a.status),3)]),e("td",Pe,[e("span",{class:f(["px-2 py-1 text-xs font-medium rounded-full",a.category_badge_class])},d(a.category),3)]),e("td",Te,[e("span",Ie,"AED "+d(a.daily_rate),1)]),e("td",Oe,[s(_(G),null,{default:o(()=>[s(_(H),{"as-child":""},{default:o(()=>[s(x,{size:"sm",variant:"outline",class:"h-8 w-8 p-0"},{default:o(()=>[s(n,{name:"more-horizontal",class:"w-4 h-4"}),t[17]||(t[17]=e("span",{class:"sr-only"},"Open menu",-1))]),_:1,__:[17]})]),_:1}),s(_(J),{align:"end"},{default:o(()=>[s(_(V),{onClick:p=>E(a)},{default:o(()=>[s(n,{name:"eye",class:"w-4 h-4 mr-2"}),t[18]||(t[18]=u(" View Details "))]),_:2,__:[18]},1032,["onClick"]),s(_(V),{onClick:p=>F(a)},{default:o(()=>[s(n,{name:"edit",class:"w-4 h-4 mr-2"}),t[19]||(t[19]=u(" Edit "))]),_:2,__:[19]},1032,["onClick"]),s(_(V),{onClick:p=>B(a)},{default:o(()=>[s(n,{name:"trash",class:"w-4 h-4 mr-2"}),t[20]||(t[20]=u(" Delete "))]),_:2,__:[20]},1032,["onClick"])]),_:2},1024)]),_:2},1024)])]))),128))])])]),C.value.length===0?(m(),v("div",We,[s(n,{name:"car",class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t[23]||(t[23]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No vehicles found",-1)),t[24]||(t[24]=e("p",{class:"text-gray-500 mb-4"},"Try adjusting your filters or sync from API to get started.",-1)),s(x,{onClick:S,variant:"outline"},{default:o(()=>[s(n,{name:"refresh-cw",class:"w-4 h-4 mr-2"}),t[22]||(t[22]=u(" Sync from API "))]),_:1,__:[22]})])):A("",!0)])])]),_:1}))}});export{ct as default};
