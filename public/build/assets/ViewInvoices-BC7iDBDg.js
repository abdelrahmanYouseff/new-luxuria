import{l as A,j as F,g as u,o as i,b as o,u as s,q as B,w as r,a as t,t as d,h as c,F as k,r as M,n as w,c as _,d as m,W as N}from"./app-Ba_b_3m7.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dwz7x49o.js";import{_ as p}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CDA0Nxch.js";import{_ as g,a as y}from"./CardContent.vue_vue_type_script_setup_true_lang-D_ezlwcN.js";import{e as E,_ as L,a as j,b as H,c as U,d as W}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DNNytnhC.js";import{F as q}from"./x-Crtn1-Kg.js";import{D as X,C as G,b as J,a as K,E as P,c as S}from"./eye-BPt7r2d8.js";/* empty css            */import"./createLucideIcon-C8qViPkE.js";import"./useForwardExpose-BiQwX1hr.js";import"./RovingFocusGroup-DDiL9omc.js";const O={class:"flex h-full flex-1 flex-col gap-6 rounded-xl p-6"},Q={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},R={class:"flex items-center space-x-2"},Y={class:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg"},Z={class:"text-xl font-bold"},tt={class:"flex items-center space-x-2"},et={class:"p-2 bg-green-100 dark:bg-green-900 rounded-lg"},st={class:"text-xl font-bold"},at={class:"flex items-center space-x-2"},ot={class:"p-2 bg-green-100 dark:bg-green-900 rounded-lg"},lt={class:"text-xl font-bold"},dt={class:"flex items-center space-x-2"},rt={class:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg"},nt={class:"text-xl font-bold"},it={class:"flex items-center space-x-2"},ut={class:"p-2 bg-red-100 dark:bg-red-900 rounded-lg"},ct={class:"text-xl font-bold"},mt={class:"bg-white dark:bg-gray-900 rounded-xl shadow border border-sidebar-border/70 overflow-hidden"},pt={class:"overflow-x-auto"},xt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},gt={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},yt={class:"px-6 py-4 whitespace-nowrap"},_t={class:"text-sm font-medium text-gray-900 dark:text-white"},ft={class:"text-sm text-gray-500 dark:text-gray-400"},vt={class:"px-6 py-4 whitespace-nowrap"},bt={class:"text-sm text-gray-900 dark:text-white"},kt={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},wt={class:"px-6 py-4 whitespace-nowrap"},ht={class:"text-sm font-semibold text-gray-900 dark:text-white"},Ct={class:"px-6 py-4 whitespace-nowrap"},Dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},$t={class:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2"},It={key:0,class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700"},Ft={class:"flex items-center justify-between"},Mt={class:"text-sm text-gray-500 dark:text-gray-400"},Pt={class:"flex space-x-1"},St={key:0,class:"space-y-6"},Tt={class:"grid grid-cols-2 gap-4"},Vt={class:"text-sm font-semibold"},At={class:"text-sm"},Bt={class:"text-sm font-semibold"},Nt={class:"border-t pt-4"},zt={class:"bg-gray-50 dark:bg-gray-800 p-3 rounded-lg"},Et={class:"font-medium"},Lt={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},jt={key:0,class:"border-t pt-4"},Ht={class:"grid grid-cols-2 gap-4 text-sm"},Ut={class:"capitalize"},Wt={key:0},se=A({__name:"ViewInvoices",props:{invoices:{},stats:{},user:{}},setup(qt){const f=F(!1),n=F(null),T=[{title:"Dashboard",href:"/dashboard"},{title:"My Invoices",href:"/view-invoices",current:!0}],v=l=>new Intl.NumberFormat("en-AE",{minimumFractionDigits:2,maximumFractionDigits:2}).format(l),b=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),h=l=>({completed:"Completed",pending:"Pending",failed:"Failed",cancelled:"Cancelled"})[l]||l,C=l=>({completed:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",failed:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",cancelled:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"})[l]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",D=l=>{window.open(`/invoice-coupons/${l.id}/download`,"_blank")},$=l=>{window.open(`/invoice-coupons/${l.id}/pdf`,"_blank")},V=l=>{l&&N.visit(l)};return(l,e)=>(i(),u(k,null,[o(s(B),{title:"My Invoices"}),o(z,{breadcrumbs:T},{default:r(()=>[t("div",O,[e[13]||(e[13]=t("div",{class:"flex items-center justify-between"},[t("div",null,[t("h1",{class:"text-2xl font-bold text-foreground"},"My Invoices"),t("p",{class:"text-muted-foreground"},"View and manage your purchase invoices")])],-1)),t("div",Q,[o(s(g),null,{default:r(()=>[o(s(y),{class:"p-4"},{default:r(()=>[t("div",R,[t("div",Y,[o(s(q),{class:"h-4 w-4 text-blue-600 dark:text-blue-300"})]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-muted-foreground"},"Total Invoices",-1)),t("p",Z,d(l.stats.total_invoices),1)])])]),_:1})]),_:1}),o(s(g),null,{default:r(()=>[o(s(y),{class:"p-4"},{default:r(()=>[t("div",tt,[t("div",et,[o(s(X),{class:"h-4 w-4 text-green-600 dark:text-green-300"})]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-muted-foreground"},"Total Spent",-1)),t("p",st,d(v(l.stats.total_amount))+" AED",1)])])]),_:1})]),_:1}),o(s(g),null,{default:r(()=>[o(s(y),{class:"p-4"},{default:r(()=>[t("div",at,[t("div",ot,[o(s(G),{class:"h-4 w-4 text-green-600 dark:text-green-300"})]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-muted-foreground"},"Completed",-1)),t("p",lt,d(l.stats.completed_invoices),1)])])]),_:1})]),_:1}),o(s(g),null,{default:r(()=>[o(s(y),{class:"p-4"},{default:r(()=>[t("div",dt,[t("div",rt,[o(s(J),{class:"h-4 w-4 text-yellow-600 dark:text-yellow-300"})]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-muted-foreground"},"Pending",-1)),t("p",nt,d(l.stats.pending_invoices),1)])])]),_:1})]),_:1}),o(s(g),null,{default:r(()=>[o(s(y),{class:"p-4"},{default:r(()=>[t("div",it,[t("div",ut,[o(s(K),{class:"h-4 w-4 text-red-600 dark:text-red-300"})]),t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-muted-foreground"},"Failed",-1)),t("p",ct,d(l.stats.failed_invoices),1)])])]),_:1})]),_:1})]),t("div",mt,[e[12]||(e[12]=t("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Invoice History"),t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Track all your purchases and payments")],-1)),t("div",pt,[t("table",xt,[e[11]||(e[11]=t("thead",{class:"bg-gray-50 dark:bg-gray-800"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Invoice "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Coupon "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Amount "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Date "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",gt,[(i(!0),u(k,null,M(l.invoices.data,a=>(i(),u("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800"},[t("td",yt,[t("div",_t,d(a.invoice_number),1),t("div",ft," ID: "+d(a.id),1)]),t("td",vt,[t("div",bt,d(a.coupon_name),1),a.coupon_code?(i(),u("div",kt," Code: "+d(a.coupon_code),1)):c("",!0)]),t("td",wt,[t("div",ht,d(v(a.amount))+" "+d(a.currency),1)]),t("td",Ct,[t("span",{class:w([C(a.payment_status),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},d(h(a.payment_status)),3)]),t("td",Dt,d(b(a.created_at)),1),t("td",$t,[o(s(p),{variant:"outline",size:"sm",onClick:x=>$(a),class:"text-blue-600 hover:text-blue-800"},{default:r(()=>[o(s(P),{class:"h-4 w-4 mr-1"}),e[9]||(e[9]=m(" View PDF "))]),_:2,__:[9]},1032,["onClick"]),a.payment_status==="completed"?(i(),_(s(p),{key:0,variant:"outline",size:"sm",onClick:x=>D(a),class:"text-green-600 hover:text-green-800"},{default:r(()=>[o(s(S),{class:"h-4 w-4 mr-1"}),e[10]||(e[10]=m(" Download "))]),_:2,__:[10]},1032,["onClick"])):c("",!0)])]))),128))])])]),l.invoices.links&&l.invoices.links.length>3?(i(),u("div",It,[t("div",Ft,[t("div",Mt," Showing "+d(l.invoices.from)+" to "+d(l.invoices.to)+" of "+d(l.invoices.total)+" results ",1),t("div",Pt,[(i(!0),u(k,null,M(l.invoices.links,a=>(i(),_(s(p),{key:a.label,variant:"outline",size:"sm",onClick:x=>V(a.url),disabled:!a.url,class:w({"bg-primary text-primary-foreground":a.active,"opacity-50 cursor-not-allowed":!a.url}),innerHTML:a.label},null,8,["onClick","disabled","class","innerHTML"]))),128))])])])):c("",!0)])]),o(s(E),{open:f.value,"onUpdate:open":e[3]||(e[3]=a=>f.value=a)},{default:r(()=>[o(s(L),{class:"max-w-2xl"},{default:r(()=>[o(s(j),null,{default:r(()=>[o(s(H),null,{default:r(()=>e[14]||(e[14]=[m("Invoice Details")])),_:1,__:[14]}),o(s(U),null,{default:r(()=>{var a;return[m("Invoice #"+d((a=n.value)==null?void 0:a.invoice_number),1)]}),_:1})]),_:1}),n.value?(i(),u("div",St,[t("div",Tt,[t("div",null,[e[15]||(e[15]=t("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Invoice Number",-1)),t("p",Vt,d(n.value.invoice_number),1)]),t("div",null,[e[16]||(e[16]=t("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Date",-1)),t("p",At,d(b(n.value.created_at)),1)]),t("div",null,[e[17]||(e[17]=t("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Status",-1)),t("span",{class:w([C(n.value.payment_status),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},d(h(n.value.payment_status)),3)]),t("div",null,[e[18]||(e[18]=t("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Amount",-1)),t("p",Bt,d(v(n.value.amount))+" "+d(n.value.currency),1)])]),t("div",Nt,[e[19]||(e[19]=t("h4",{class:"font-medium mb-2"},"Coupon Details",-1)),t("div",zt,[t("p",Et,d(n.value.coupon_name),1),n.value.coupon_code?(i(),u("p",Lt," Code: "+d(n.value.coupon_code),1)):c("",!0)])]),n.value.payment_method?(i(),u("div",jt,[e[22]||(e[22]=t("h4",{class:"font-medium mb-2"},"Payment Details",-1)),t("div",Ht,[t("div",null,[e[20]||(e[20]=t("label",{class:"text-gray-600 dark:text-gray-400"},"Payment Method",-1)),t("p",Ut,d(n.value.payment_method),1)]),n.value.paid_at?(i(),u("div",Wt,[e[21]||(e[21]=t("label",{class:"text-gray-600 dark:text-gray-400"},"Paid At",-1)),t("p",null,d(b(n.value.paid_at)),1)])):c("",!0)])])):c("",!0)])):c("",!0),o(s(W),null,{default:r(()=>{var a,x;return[o(s(p),{variant:"outline",onClick:e[0]||(e[0]=I=>f.value=!1)},{default:r(()=>e[23]||(e[23]=[m("Close")])),_:1,__:[23]}),((a=n.value)==null?void 0:a.payment_status)==="completed"?(i(),_(s(p),{key:0,variant:"outline",onClick:e[1]||(e[1]=I=>n.value&&$(n.value)),class:"mr-2"},{default:r(()=>[o(s(P),{class:"h-4 w-4 mr-2"}),e[24]||(e[24]=m(" View PDF "))]),_:1,__:[24]})):c("",!0),((x=n.value)==null?void 0:x.payment_status)==="completed"?(i(),_(s(p),{key:1,onClick:e[2]||(e[2]=I=>n.value&&D(n.value))},{default:r(()=>[o(s(S),{class:"h-4 w-4 mr-2"}),e[25]||(e[25]=m(" Download PDF "))]),_:1,__:[25]})):c("",!0)]}),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{se as default};
