import{j as c,k as S,g as o,o as l,a as e,h as g,t,n as m,F as p,r as y,d as V}from"./app-BmtqsL1k.js";/* empty css            */const A={class:"container mx-auto px-4 py-8"},C={class:"max-w-4xl mx-auto"},j={class:"bg-white rounded-lg shadow-md p-6 mb-6"},F={class:"flex items-center justify-between mb-4"},P={class:"flex space-x-2"},I=["disabled"],N=["disabled"],T={key:0,class:"mb-4"},D={class:"flex items-center space-x-2"},E={class:"font-medium"},R={key:0,class:"text-sm text-gray-600 mt-1"},B={key:1,class:"space-y-3"},z={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},O={class:"bg-green-50 p-4 rounded-lg"},q={class:"text-2xl font-bold text-green-600"},K={class:"bg-blue-50 p-4 rounded-lg"},L={class:"text-2xl font-bold text-blue-600"},M={class:"bg-gray-50 p-4 rounded-lg"},U={class:"text-2xl font-bold text-gray-600"},X={key:0,class:"mt-4"},G={class:"font-medium text-red-700 mb-2"},H={class:"bg-red-50 p-3 rounded-lg max-h-40 overflow-y-auto"},J={class:"bg-white rounded-lg shadow-md p-6 mb-6"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},W={class:"bg-gray-50 p-4 rounded-lg"},Y={class:"text-2xl font-bold text-gray-600"},Z={class:"bg-green-50 p-4 rounded-lg"},$={class:"text-2xl font-bold text-green-600"},ee={class:"bg-white rounded-lg shadow-md p-6"},se={key:0,class:"space-y-3"},te={class:"font-medium"},ae={class:"text-sm text-gray-600"},oe={class:"text-right"},le={key:1,class:"text-center text-gray-500 py-8"},ce={__name:"VehiclesSync",setup(ne){const r=c(!1),u=c(!1),i=c(null),n=c(null),v=c({}),x=c([]),f=async()=>{r.value=!0;try{const s=await(await fetch("/api/v1/vehicles/test/connection")).json();i.value=s}catch{i.value={success:!1,message:"Failed to connect to API"}}finally{r.value=!1}},w=async()=>{u.value=!0;try{const s=await(await fetch("/vehicles/sync",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();n.value=s,s.success&&(_(),b())}catch{n.value={success:!1,error:"Failed to sync vehicles"}}finally{u.value=!1}},_=async()=>{var d,s;try{const h=await(await fetch("/api/vehicles")).json();h.success&&(v.value={total:((d=h.pagination)==null?void 0:d.total)||0,available:((s=h.data)==null?void 0:s.filter(k=>k.status==="Available").length)||0})}catch(a){console.error("Failed to load database stats:",a)}},b=async()=>{try{const s=await(await fetch("/api/vehicles?per_page=5")).json();s.success&&(x.value=s.data||[])}catch(d){console.error("Failed to load recent vehicles:",d)}};return S(()=>{_(),b()}),(d,s)=>(l(),o("div",A,[e("div",C,[s[8]||(s[8]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Sync Vehicles from API"),e("p",{class:"text-gray-600"},"Synchronize vehicles from external API to local database")],-1)),e("div",j,[e("div",F,[s[0]||(s[0]=e("h2",{class:"text-xl font-semibold text-gray-900"},"Sync Status",-1)),e("div",P,[e("button",{onClick:f,disabled:r.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"},t(r.value?"Checking...":"Check API Connection"),9,I),e("button",{onClick:w,disabled:u.value,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50"},t(u.value?"Syncing...":"Sync Vehicles"),9,N)])]),i.value?(l(),o("div",T,[e("div",D,[e("div",{class:m(["w-3 h-3 rounded-full",i.value.success?"bg-green-500":"bg-red-500"])},null,2),e("span",E,t(i.value.success?"API Connected":"API Connection Failed"),1)]),i.value.message?(l(),o("p",R,t(i.value.message),1)):g("",!0)])):g("",!0),n.value?(l(),o("div",B,[e("div",z,[e("div",O,[e("div",q,t(n.value.synced_count||0),1),s[1]||(s[1]=e("div",{class:"text-sm text-green-700"},"New Vehicles",-1))]),e("div",K,[e("div",L,t(n.value.updated_count||0),1),s[2]||(s[2]=e("div",{class:"text-sm text-blue-700"},"Updated Vehicles",-1))]),e("div",M,[e("div",U,t(n.value.total_api_vehicles||0),1),s[3]||(s[3]=e("div",{class:"text-sm text-gray-700"},"Total in API",-1))])]),n.value.errors&&n.value.errors.length>0?(l(),o("div",X,[e("h3",G,"Errors ("+t(n.value.errors.length)+")",1),e("div",H,[(l(!0),o(p,null,y(n.value.errors,a=>(l(),o("div",{key:a.api_id,class:"text-sm text-red-600"},[e("strong",null,t(a.api_id)+":",1),V(" "+t(a.error),1)]))),128))])])):g("",!0)])):g("",!0)]),e("div",J,[s[6]||(s[6]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Database Status",-1)),e("div",Q,[e("div",W,[e("div",Y,t(v.value.total||0),1),s[4]||(s[4]=e("div",{class:"text-sm text-gray-700"},"Total Vehicles",-1))]),e("div",Z,[e("div",$,t(v.value.available||0),1),s[5]||(s[5]=e("div",{class:"text-sm text-green-700"},"Available Vehicles",-1))])])]),e("div",ee,[s[7]||(s[7]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Recent Vehicles",-1)),x.value.length>0?(l(),o("div",se,[(l(!0),o(p,null,y(x.value,a=>(l(),o("div",{key:a.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("div",te,t(a.make)+" "+t(a.model),1),e("div",ae,t(a.plate_number)+" • "+t(a.year)+" • AED "+t(a.daily_rate)+"/day ",1)]),e("div",oe,[e("span",{class:m(["px-2 py-1 text-xs rounded-full",a.status==="Available"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},t(a.status),3)])]))),128))])):(l(),o("div",le," No vehicles found in database "))])])]))}};export{ce as default};
